generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  name String
  email String @unique
  cpf String? @unique
  image String?
  balance Int?
  password String
  isAdmin Boolean?
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  orders Order[]
}

model Restaurant{
  id Int @id @default(autoincrement())
  name String
  email String
  cnpj String
  adress String
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  products Product[]
  orders Order[]
}

model Product{
  id Int @id @default(autoincrement())
  name String
  description String?
  quantity Int
  image String
  price Float
  idRestaurant Int
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  restaurant Restaurant @relation(fields: [idRestaurant], references: [id])
  orderProduct OrderProduct[]
}

model Order{
  id Int @id @default(autoincrement())
  idBuyer Int
  idRestaurant Int
  restaurant Restaurant @relation(fields: [idRestaurant], references: [id])
  buyer User @relation(fields: [idBuyer], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  orderProduct OrderProduct[]
}

model OrderProduct {
  id Int @id @default(autoincrement())
  idOrder Int
  idProduct Int
  quantity Int
  order Order @relation(fields: [idOrder], references: [id])
  product Product @relation(fields: [idProduct], references: [id])
}